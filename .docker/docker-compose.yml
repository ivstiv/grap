version: '3'
networks:
  email-proj-network:
    driver: bridge

services:
  server:
    build:
      context: .
      dockerfile: dev.Dockerfile
    user: $currentUser:$currentGroup
    image: email-proj-backend
    container_name: email-proj-backend
    command: sh -c "[ ! -d node_modules ] && npm i; npm run dev"
    # command: tail -F /dev/null
    volumes:
      - ../server:/app
      - ../database-volume:/database-volume
    ports:
      - 3000:3000
      - 25:3000
    networks:
      - email-proj-network
